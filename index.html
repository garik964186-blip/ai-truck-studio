<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ULTRA ‚Äî AI HUB</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { --paper: #f4e4bc; --ink: #2c241a; --accent: #8b0000; }
        body, html { margin: 0; padding: 0; height: 100%; background: #1a1a1a; overflow: hidden; font-family: "Georgia", serif; }
        .viewport { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; perspective: 2500px; }
        .book { width: 92vw; max-width: 420px; height: 85vh; position: relative; transform-style: preserve-3d; }

        .page { position: absolute; width: 100%; height: 100%; top: 0; left: 0; transform-origin: left; transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1); }
        .paper-sheet { background: var(--paper); background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png'); color: var(--ink); display: flex; flex-direction: column; height: 100%; box-shadow: inset 3px 0 15px rgba(0,0,0,0.1); border-radius: 0 5px 5px 0; }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 0 5px 5px 0; overflow: hidden; }
        .back { transform: rotateY(180deg); background: #e8d5a7; border-radius: 5px 0 0 5px; box-shadow: inset 20px 0 40px rgba(0,0,0,0.2); }
        .flipped { transform: rotateY(-170deg) skewY(-1deg); }

        .header { padding: 12px; background: rgba(0,0,0,0.05); border-bottom: 2px solid var(--ink); text-align: center; }
        .ai-selector { width: 90%; background: rgba(255,255,255,0.6); border: 1px solid var(--ink); padding: 5px; border-radius: 5px; font-family: serif; outline: none; }
        
        .scroll-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; touch-action: pan-y; -webkit-overflow-scrolling: touch; }
        .msg { font-size: 15px; padding: 10px 0; border-bottom: 1px dashed rgba(0,0,0,0.1); }
        .msg b { color: var(--accent); }

        .input-bar { padding: 15px; background: rgba(0,0,0,0.05); display: flex; gap: 10px; border-top: 1px solid rgba(0,0,0,0.1); }
        .field { flex: 1; background: rgba(255,255,255,0.5); border: 1px solid rgba(0,0,0,0.2); padding: 12px; border-radius: 5px; outline: none; }
        
        .photo-frame { background: white; padding: 8px 8px 20px 8px; box-shadow: 2px 4px 10px rgba(0,0,0,0.2); margin-bottom: 15px; }
        .photo-frame img { width: 100%; }

        .cover-front { background: linear-gradient(135deg, #4b0000 0%, #2a0000 100%); border: 8px double #d4af37; color: #d4af37; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
    </style>
</head>
<body>

<div class="viewport">
    <div class="book">
        
        <div class="page" id="p4" style="z-index: 1;">
            <div class="front paper-sheet">
                <div class="header">
                    <select id="model-select" class="ai-selector">
                        <option value="openai">üîÆ GPT-4o (–ú—É–¥—Ä–µ—Ü)</option>
                        <option value="mistral">üå™Ô∏è Mistral (–ë—ã—Å—Ç—Ä—ã–π)</option>
                        <option value="searchgpt">üîç Search (–ü–æ–∏—Å–∫)</option>
                    </select>
                </div>
                <div class="scroll-area" id="hub-box">
                    <div class="msg"><b>–°–∏—Å—Ç–µ–º–∞:</b> –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å —Å–≤–µ—Ä—Ö—É –∏ –Ω–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥.</div>
                </div>
                <div class="input-bar">
                    <input type="text" id="i-hub" class="field" placeholder="–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å..." onkeypress="if(event.key==='Enter') sendHubMessage()">
                    <button onclick="sendHubMessage()" style="background:none; border:none; color:var(--accent); font-size:20px;"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            <div class="back"></div>
        </div>

        <div class="page" id="p3" style="z-index: 2;">
            <div class="front paper-sheet">
                <div class="header"><b>–ë–´–°–¢–†–´–ï –ó–ê–ú–ï–¢–ö–ò</b></div>
                <div class="scroll-area" id="chat-box"></div>
                <div class="input-bar">
                    <input type="text" id="i-chat" class="field" placeholder="–ó–∞–ø–∏—Å—å..." onkeypress="if(event.key==='Enter') sendMessage()">
                </div>
            </div>
            <div class="back"></div>
        </div>

        <div class="page" id="p2" style="z-index: 3;">
            <div class="front paper-sheet">
                <div class="header"><b>–ê–õ–¨–ë–û–ú –≠–°–ö–ò–ó–û–í</b></div>
                <div class="scroll-area" id="imgs-box"></div>
                <div class="input-bar">
                    <input type="text" id="i-art" class="field" placeholder="–ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å...">
                    <button onclick="genArt()" style="background:var(--accent); color:white; border:none; padding:10px;"><i class="fas fa-magic"></i></button>
                </div>
            </div>
            <div class="back"></div>
        </div>

        <div class="page" id="p1" style="z-index: 4;">
            <div class="front cover-front">
                <i class="fas fa-brain" style="font-size: 60px; margin-bottom: 20px;"></i>
                <h1 style="margin:0;">ULTRA</h1>
                <p>–ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–´–ô –•–ê–ë</p>
                <div style="margin-top: 40px; font-style: italic;">–õ–∏—Å—Ç–Ω–∏ –¥–ª—è –æ–±—â–µ–Ω–∏—è...</div>
            </div>
            <div class="back"></div>
        </div>

    </div>
</div>

<script>
    let startX = 0, currentStep = 1;
    const maxSteps = 4;

    document.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    document.addEventListener('touchend', e => {
        let diff = startX - e.changedTouches[0].clientX;
        if (Math.abs(diff) > 60) {
            if (diff > 0 && currentStep < maxSteps) {
                document.getElementById('p' + currentStep).classList.add('flipped');
                currentStep++;
            } else if (diff < 0 && currentStep > 1) {
                currentStep--;
                document.getElementById('p' + currentStep).classList.remove('flipped');
            }
        }
    });

    // –ì–õ–ê–í–ù–´–ô –ß–ê–¢ –° –í–´–ë–û–†–û–ú –ú–û–î–ï–õ–ò
    async function sendHubMessage() {
        const box = document.getElementById('hub-box');
        const input = document.getElementById('i-hub');
        const model = document.getElementById('model-select').value;
        const val = input.value; if(!val) return;
        
        input.value = '';
        box.innerHTML = `<div class="msg"><b>–í—ã:</b> ${val}</div>` + box.innerHTML;
        
        try {
            const res = await fetch(`https://text.pollinations.ai/prompt/${encodeURIComponent(val)}?model=${model}`);
            const data = await res.text();
            box.innerHTML = `<div class="msg"><b>${model.toUpperCase()}:</b> ${marked.parse(data)}</div>` + box.innerHTML;
        } catch (e) {
            box.innerHTML = `<div class="msg" style="color:red;">–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å ${model}.</div>` + box.innerHTML;
        }
        box.scrollTop = 0;
    }

    async function sendMessage() {
        const box = document.getElementById('chat-box');
        const input = document.getElementById('i-chat');
        if(!input.value) return;
        const val = input.value; input.value = '';
        box.innerHTML = `<div class="msg"><b>–í—ã:</b> ${val}</div>` + box.innerHTML;
        const res = await fetch(`https://text.pollinations.ai/prompt/${encodeURIComponent(val)}`);
        const data = await res.text();
        box.innerHTML = `<div class="msg"><b>–ö–Ω–∏–≥–∞:</b> ${data}</div>` + box.innerHTML;
    }

    function genArt() {
        const input = document.getElementById('i-art');
        const box = document.getElementById('imgs-box');
        if(!input.value) return;
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(input.value)}?nologo=true&seed=${Math.random()}`;
        const frame = document.createElement('div');
        frame.className = 'photo-frame';
        frame.innerHTML = `<img src="${url}"><div style="text-align:center;font-size:12px;margin-top:5px;">${input.value}</div>`;
        box.insertBefore(frame, box.firstChild);
        input.value = '';
    }
</script>
</body>
</html>
