<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ULTRA ‚Äî FULL POWER</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { --paper: #f4e4bc; --ink: #2c241a; --accent: #8b0000; }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; overflow: hidden; font-family: "Georgia", serif; }
        
        .viewport { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; perspective: 2500px; }
        .book { width: 92vw; max-width: 420px; height: 85vh; position: relative; transform-style: preserve-3d; }

        .page { position: absolute; width: 100%; height: 100%; top: 0; left: 0; transform-origin: left; transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1); }
        .paper-sheet { background: var(--paper); background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png'); color: var(--ink); display: flex; flex-direction: column; height: 100%; box-shadow: inset 3px 0 15px rgba(0,0,0,0.1); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 0 5px 5px 0; overflow: hidden; }
        .back { transform: rotateY(180deg); background: #e8d5a7; box-shadow: inset 20px 0 40px rgba(0,0,0,0.2); }
        .flipped { transform: rotateY(-170deg) skewY(-1deg); }

        .header { padding: 12px; background: rgba(0,0,0,0.05); border-bottom: 2px solid var(--ink); text-align: center; }
        .ai-selector { width: 90%; background: #fff9e6; border: 1px solid var(--ink); padding: 8px; border-radius: 5px; font-weight: bold; }
        
        .scroll-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; touch-action: pan-y; }
        
        /* –ö–ù–û–ü–ö–ê –ú–ò–ö–†–û–§–û–ù–ê */
        .mic-btn { background: #eee; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border: none; color: #555; transition: 0.3s; }
        .mic-active { color: var(--accent); box-shadow: 0 0 10px var(--accent); }

        .input-bar { padding: 10px; background: rgba(0,0,0,0.05); display: flex; gap: 8px; border-top: 1px solid rgba(0,0,0,0.1); align-items: center; }
        .field { flex: 1; background: #fff; border: 1px solid #ccc; padding: 12px; border-radius: 25px; outline: none; font-size: 16px; }

        /* –ê–õ–¨–ë–û–ú –ò –§–û–¢–û */
        .photo-frame { background: white; padding: 8px 8px 25px 8px; box-shadow: 2px 4px 10px rgba(0,0,0,0.2); cursor: zoom-in; }
        .photo-frame img { width: 100%; border-radius: 2px; }

        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –ü–†–û–°–ú–û–¢–†–ê */
        #viewer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center; }
        #viewer img { max-width: 95%; max-height: 95%; border: 3px solid white; box-shadow: 0 0 30px rgba(255,255,255,0.2); }

        .cover-front { background: linear-gradient(135deg, #4b0000 0%, #2a0000 100%); color: #d4af37; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; border: 8px double #d4af37; }
    </style>
</head>
<body>

<div class="viewport">
    <div class="book">
        
        <div class="page" id="p3" style="z-index: 1;">
            <div class="front paper-sheet">
                <div class="header">
                    <select id="model-select" class="ai-selector">
                        <option value="openai">üîÆ GPT-4o (–ú—É–¥—Ä–µ—Ü)</option>
                        <option value="mistral">üå™Ô∏è Mistral (–ë—ã—Å—Ç—Ä—ã–π)</option>
                        <option value="searchgpt">üîç Search (–ü–æ–∏—Å–∫)</option>
                    </select>
                </div>
                <div id="hub-box" class="scroll-area">
                    <div class="msg"><b>–°–∏—Å—Ç–µ–º–∞:</b> –ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω. –ú–æ–∂–µ—Ç–µ –¥–∏–∫—Ç–æ–≤–∞—Ç—å –∏–ª–∏ –ø–∏—Å–∞—Ç—å.</div>
                </div>
                <div class="input-bar">
                    <button onclick="startMic('i-hub')" class="mic-btn" id="mic-hub"><i class="fas fa-microphone"></i></button>
                    <input type="text" id="i-hub" class="field" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." onkeypress="if(event.key==='Enter') sendHubMessage()">
                    <button onclick="sendHubMessage()" style="color:var(--accent); border:none; background:none; font-size:22px;"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            <div class="back"></div>
        </div>

        <div class="page" id="p2" style="z-index: 2;">
            <div class="front paper-sheet">
                <div class="header">üìú –ê–õ–¨–ë–û–ú –≠–°–ö–ò–ó–û–í</div>
                <div id="imgs-box" class="scroll-area"></div>
                <div class="input-bar">
                    <button onclick="startMic('i-art')" class="mic-btn" id="mic-art"><i class="fas fa-microphone"></i></button>
                    <input type="text" id="i-art" class="field" placeholder="–ß—Ç–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å?">
                    <button onclick="genArt()" style="background:var(--accent); color:white; border:none; padding:10px 15px; border-radius:20px;"><i class="fas fa-magic"></i></button>
                </div>
            </div>
            <div class="back"></div>
        </div>

        <div class="page" id="p1" style="z-index: 3;">
            <div class="front cover-front">
                <i class="fas fa-bolt" style="font-size: 60px; margin-bottom: 20px;"></i>
                <h1 style="margin:0;">ULTRA AI</h1>
                <p>–ì–û–õ–û–° –ò –ì–†–ê–§–ò–ö–ê</p>
                <div style="margin-top: 40px; font-style: italic;">–õ–∏—Å—Ç–Ω–∏—Ç–µ...</div>
            </div>
            <div class="back"></div>
        </div>

    </div>
</div>

<div id="viewer" onclick="this.style.display='none'">
    <img id="v-img" src="">
</div>

<script>
    let startX = 0, currentStep = 1;

    // –õ–û–ì–ò–ö–ê –°–í–ê–ô–ü–ê
    document.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    document.addEventListener('touchend', e => {
        let diff = startX - e.changedTouches[0].clientX;
        if (Math.abs(diff) > 60) {
            if (diff > 0 && currentStep < 3) { document.getElementById('p' + currentStep).classList.add('flipped'); currentStep++; }
            else if (diff < 0 && currentStep > 1) { currentStep--; document.getElementById('p' + currentStep).classList.remove('flipped'); }
        }
    });

    // –ì–û–õ–û–°–û–í–û–ô –í–í–û–î (–ú–∏–∫—Ä–æ—Ñ–æ–Ω)
    function startMic(targetId) {
        const Speech = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!Speech) return alert("–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.");
        const rec = new Speech();
        rec.lang = 'ru-RU';
        rec.onstart = () => document.querySelectorAll('.mic-btn').forEach(b => b.classList.add('mic-active'));
        rec.onresult = (e) => {
            document.getElementById(targetId).value = e.results[0][0].transcript;
            document.querySelectorAll('.mic-btn').forEach(b => b.classList.remove('mic-active'));
        };
        rec.start();
    }

    // –ß–ê–¢ –° –ù–ï–ô–†–û–°–ï–¢–Ø–ú–ò
    async function sendHubMessage() {
        const box = document.getElementById('hub-box');
        const input = document.getElementById('i-hub');
        const model = document.getElementById('model-select').value;
        const val = input.value; if(!val) return;
        input.value = '';
        box.innerHTML = `<div class="msg"><b>–í—ã:</b> ${val}</div>` + box.innerHTML;
        const res = await fetch(`https://text.pollinations.ai/prompt/${encodeURIComponent(val)}?model=${model}`);
        const data = await res.text();
        box.innerHTML = `<div class="msg"><b>AI:</b> ${marked.parse(data)}</div>` + box.innerHTML;
    }

    // –ì–ï–ù–ï–†–ê–¶–ò–Ø –ò –ü–†–û–°–ú–û–¢–†
    function genArt() {
        const input = document.getElementById('i-art');
        const box = document.getElementById('imgs-box');
        if(!input.value) return;
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(input.value)}?nologo=true&seed=${Math.random()}`;
        const frame = document.createElement('div');
        frame.className = 'photo-frame';
        frame.onclick = () => {
            document.getElementById('v-img').src = url;
            document.getElementById('viewer').style.display = 'flex';
        };
        frame.innerHTML = `<img src="${url}"><div style="text-align:center;font-size:12px;margin-top:5px;">${input.value} (–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å)</div>`;
        box.insertBefore(frame, box.firstChild);
        input.value = '';
    }
</script>
</body>
</html>
