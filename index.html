<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–ù–ê–®–ê –ö–ù–ò–ì–ê | BOSS AI EDITION</title>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { 
            --paper: #f4e4bc; --ink: #2c241a; --gold: #d4af37; --accent: #8b0000; 
            --leather: #2a0505; --pause-color: #d4af37;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100dvh; 
            background: #000; overflow: hidden; 
            font-family: "Georgia", serif; 
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç —Ñ–æ–Ω–∞ */
        .bg-fog {
            position: fixed; inset: 0; 
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/></filter></defs><rect width="100" height="100" filter="url(%23noise)" opacity="0.08"/></svg>');
            opacity: 0.15; pointer-events: none; z-index: 10000;
            animation: fogMove 120s linear infinite;
        }
        @keyframes fogMove { 0% { background-position: 0% 0%; } 100% { background-position: 100% 100%; } }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .app-container {
            width: 100vw; height: 100dvh; position: relative;
            display: flex; flex-direction: column;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
        .app-header {
            height: 50px; background: linear-gradient(to bottom, #1a1a1a, #000);
            color: var(--gold); display: flex; align-items: center;
            justify-content: space-between; padding: 0 15px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            z-index: 100; position: relative;
        }
        .header-title { 
            font-weight: bold; font-size: 18px; 
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        .header-btn {
            background: none; border: none; color: var(--gold);
            font-size: 20px; cursor: pointer; padding: 5px 10px;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content-area {
            flex: 1; overflow: hidden; position: relative;
            display: flex;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page {
            position: absolute; width: 100%; height: 100%;
            top: 0; left: 0; transition: transform 0.5s ease;
            display: none;
        }
        .page.active { display: flex; flex-direction: column; }
        
        /* –û–±–ª–æ–∂–∫–∞ */
        .cover-page {
            background: var(--leather); align-items: center;
            justify-content: center; color: var(--gold);
            padding: 20px; text-align: center;
            border: 12px double var(--gold);
        }
        .cover-video {
            width: 90%; max-width: 400px; background: #000;
            border-radius: 10px; overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.8);
            margin-bottom: 30px;
        }
        .cover-video video {
            width: 100%; display: block;
        }
        .swipe-hint {
            position: absolute; bottom: 30px;
            font-size: 14px; opacity: 0.7;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 
            0%, 100% { opacity: 0.7; } 
            50% { opacity: 1; } 
        }

        /* –ß–∞—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
        .chat-page { background: var(--paper); }
        .chat-header {
            padding: 12px 15px; background: rgba(0,0,0,0.07);
            border-bottom: 2px solid var(--ink); text-align: center;
            font-weight: bold; display: flex; justify-content: space-between;
            align-items: center;
        }
        .chat-container {
            flex: 1; overflow-y: auto; padding: 15px;
            display: flex; flex-direction: column; gap: 10px;
        }
        .message { 
            padding: 10px 14px; border-radius: 15px;
            max-width: 85%; word-wrap: break-word;
            line-height: 1.4;
        }
        .user-message {
            background: rgba(212, 175, 55, 0.15);
            align-self: flex-end; color: var(--accent);
            border: 1px solid rgba(212, 175, 55, 0.3);
            text-align: right;
        }
        .ai-message {
            background: rgba(255,255,255,0.9);
            align-self: flex-start; color: var(--ink);
            border: 1px solid rgba(0,0,0,0.1);
        }
        .ai-thinking {
            opacity: 0.6; font-style: italic;
        }

        /* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
        .image-page { background: var(--paper); }
        .image-container {
            flex: 1; overflow-y: auto; padding: 15px;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
        .image-item {
            background: #fff; border-radius: 8px; overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            position: relative;
        }
        .image-item img {
            width: 100%; height: 150px; object-fit: cover;
            display: block;
        }
        .image-prompt {
            padding: 8px; font-size: 11px;
            text-align: center; font-weight: bold;
        }

        /* –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ */
        .input-panel {
            padding: 15px; background: rgba(255,255,255,0.3);
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        .input-row {
            display: flex; gap: 10px; align-items: center;
        }
        .text-input {
            flex: 1; background: #fff; border: 2px solid var(--ink);
            padding: 12px 15px; border-radius: 25px;
            font-size: 16px; outline: none;
        }
        .action-btn {
            background: none; border: none; font-size: 24px;
            cursor: pointer; color: var(--ink);
            width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
        }
        .mic-btn.active { color: #ff0000; }

        /* –°–µ–ª–µ–∫—Ç–æ—Ä—ã */
        .select-row {
            padding: 10px 15px; display: flex; gap: 10px;
            background: rgba(255,255,255,0.1);
        }
        .model-select, .style-select {
            flex: 1; padding: 10px; border-radius: 10px;
            border: 2px solid var(--ink); background: #fff;
            font-weight: bold;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-dots {
            position: fixed; bottom: 80px; left: 0; right: 0;
            display: flex; justify-content: center; gap: 12px;
            z-index: 50;
        }
        .nav-dot {
            width: 10px; height: 10px; border-radius: 50%;
            background: var(--gold); opacity: 0.3;
            border: 1px solid #000; transition: 0.3s;
            cursor: pointer;
        }
        .nav-dot.active { opacity: 1; transform: scale(1.3); }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 1000; display: none; flex-direction: column;
        }
        .modal-content {
            flex: 1; display: flex; align-items: center;
            justify-content: center; padding: 20px;
        }
        .modal-img {
            max-width: 100%; max-height: 100%;
            border-radius: 10px;
        }
        .modal-close {
            padding: 20px; text-align: right;
            color: #fff; font-size: 40px; cursor: pointer;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .toast {
            position: fixed; bottom: 120px; left: 50%;
            transform: translateX(-50%); background: var(--accent);
            color: #fff; padding: 12px 24px; border-radius: 25px;
            font-weight: 500; z-index: 1000;
            animation: toastIn 0.3s;
            display: none;
        }
        @keyframes toastIn {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .header-title { font-size: 16px; }
            .message { max-width: 95%; }
            .image-container { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

<!-- –≠—Ñ—Ñ–µ–∫—Ç —Ñ–æ–Ω–∞ -->
<div class="bg-fog"></div>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
<div class="toast" id="toast"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
<div class="modal-overlay" id="modal">
    <div class="modal-close" onclick="closeModal()">√ó</div>
    <div class="modal-content">
        <img class="modal-img" id="modal-img" src="">
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
<div class="app-container">
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="app-header">
        <div class="header-title" id="page-title">–ù–ê–®–ê –ö–ù–ò–ì–ê</div>
        <div>
            <button class="header-btn" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="content-area">
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: –û–±–ª–æ–∂–∫–∞ -->
        <div class="page active" id="page-1">
            <div class="cover-page">
                <div class="cover-video">
                    <video autoplay loop muted playsinline>
                        <source src="https://raw.githubusercontent.com/garik964186-blip/ai-truck-studio/main/1768452401066.mp4" type="video/mp4">
                    </video>
                </div>
                <h1 style="margin: 0 0 10px 0; letter-spacing: 3px;">
                    –ù–ê–®–ê –ö–ù–ò–ì–ê
                </h1>
                <div style="font-size: 14px; opacity: 0.9;">
                    BOSS AI EDITION
                </div>
                <div class="swipe-hint">
                    ‚Üê –°–í–ê–ô–ü –í–ü–†–ê–í–û –î–õ–Ø –ù–ê–ß–ê–õ–ê ‚Üí
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
        <div class="page" id="page-2">
            <div class="image-page">
                <div class="chat-header">
                    <button class="header-btn" onclick="clearImages()">
                        <i class="fas fa-trash"></i>
                    </button>
                    <span>–í–ò–ó–£–ê–õ–ò–ó–ê–¢–û–†</span>
                    <button class="header-btn" onclick="showImageHelp()">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
                <div class="select-row">
                    <select class="model-select" id="image-model">
                        <option value="unsplash">Unsplash (–§–æ—Ç–æ)</option>
                        <option value="dummy">–î–µ–º–æ-—Ä–µ–∂–∏–º</option>
                    </select>
                    <select class="style-select" id="image-style">
                        <option value="any">–õ—é–±–æ–π —Å—Ç–∏–ª—å</option>
                        <option value="nature">–ü—Ä–∏—Ä–æ–¥–∞</option>
                        <option value="abstract">–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è</option>
                        <option value="art">–ò—Å–∫—É—Å—Å—Ç–≤–æ</option>
                    </select>
                </div>
                <div class="image-container" id="image-gallery">
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                <div class="input-panel">
                    <div class="input-row">
                        <button class="action-btn mic-btn" onclick="startVoiceInput('image-prompt')" id="mic-image">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <input type="text" class="text-input" id="image-prompt" 
                               placeholder="–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ..." 
                               onkeypress="if(event.key === 'Enter') generateImage()">
                        <button class="action-btn" onclick="generateImage()" style="color: var(--accent);">
                            <i class="fas fa-magic"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 3: –ò–ò –ß–∞—Ç -->
        <div class="page" id="page-3">
            <div class="chat-page">
                <div class="chat-header">
                    <button class="header-btn" onclick="clearChat()">
                        <i class="fas fa-trash"></i>
                    </button>
                    <span>–ò–ò –ò–ù–¢–ï–õ–õ–ï–ö–¢</span>
                    <button class="header-btn" onclick="showChatHelp()">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
                <div class="select-row">
                    <select class="model-select" id="chat-model">
                        <option value="gpt">GPT-4 (–£–Ω–∏–≤–µ—Ä—Å–∞–ª)</option>
                        <option value="assistant">–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</option>
                        <option value="creative">–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π</option>
                        <option value="analyst">–ê–Ω–∞–ª–∏—Ç–∏–∫</option>
                    </select>
                </div>
                <div class="chat-container" id="chat-messages">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                <div class="input-panel">
                    <div class="input-row">
                        <button class="action-btn mic-btn" onclick="startVoiceInput('chat-input')" id="mic-chat">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <input type="text" class="text-input" id="chat-input" 
                               placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å..." 
                               onkeypress="if(event.key === 'Enter') sendMessage()">
                        <button class="action-btn" onclick="sendMessage()" style="color: var(--accent);">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ -->
    <div class="nav-dots">
        <div class="nav-dot active" onclick="switchPage(1)"></div>
        <div class="nav-dot" onclick="switchPage(2)"></div>
        <div class="nav-dot" onclick="switchPage(3)"></div>
    </div>

</div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    document.addEventListener('DOMContentLoaded', () => {
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        window.currentPage = 1;
        window.speechActive = false;
        window.recognition = null;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∞–π–ø–æ–≤
        initSwipe();
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        loadSavedData();
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        updatePageTitle();
        
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ');
    });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
    function switchPage(pageNum) {
        if (pageNum === window.currentPage) return;
        
        // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        document.getElementById(`page-${window.currentPage}`).classList.remove('active');
        document.querySelectorAll('.nav-dot')[window.currentPage - 1].classList.remove('active');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        window.currentPage = pageNum;
        document.getElementById(`page-${pageNum}`).classList.add('active');
        document.querySelectorAll('.nav-dot')[pageNum - 1].classList.add('active');
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        updatePageTitle();
        
        // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
        if (navigator.vibrate) {
            navigator.vibrate(30);
        }
    }

    function updatePageTitle() {
        const titles = ['–ù–ê–®–ê –ö–ù–ò–ì–ê', '–í–ò–ó–£–ê–õ–ò–ó–ê–¢–û–†', '–ò–ò –ò–ù–¢–ï–õ–õ–ï–ö–¢'];
        document.getElementById('page-title').textContent = titles[window.currentPage - 1];
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∞–π–ø–æ–≤
    function initSwipe() {
        let startX = 0;
        let startY = 0;
        
        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
        }, { passive: true });
        
        document.addEventListener('touchend', (e) => {
            if (document.getElementById('modal').style.display === 'flex') {
                return;
            }
            
            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            
            const diffX = startX - endX;
            const diffY = startY - endY;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø (–Ω–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π)
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                if (diffX > 0 && window.currentPage < 3) {
                    // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                    switchPage(window.currentPage + 1);
                } else if (diffX < 0 && window.currentPage > 1) {
                    // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                    switchPage(window.currentPage - 1);
                }
            }
        }, { passive: true });
        
        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && window.currentPage < 3) {
                switchPage(window.currentPage + 1);
            } else if (e.key === 'ArrowLeft' && window.currentPage > 1) {
                switchPage(window.currentPage - 1);
            }
        });
    }

    // –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
    function startVoiceInput(inputId) {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        
        if (!SpeechRecognition) {
            showToast('–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
            return;
        }
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
        if (window.recognition) {
            window.recognition.stop();
        }
        
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
        window.recognition = new SpeechRecognition();
        window.recognition.lang = 'ru-RU';
        window.recognition.interimResults = false;
        window.recognition.continuous = false;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º UI
        const micBtn = document.querySelector(`#${inputId === 'chat-input' ? 'mic-chat' : 'mic-image'}`);
        micBtn.classList.add('active');
        micBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
        
        showToast('–ì–æ–≤–æ—Ä–∏—Ç–µ...');
        
        window.recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            document.getElementById(inputId).value = transcript;
            
            // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ–ª–µ —á–∞—Ç–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
            if (inputId === 'chat-input') {
                setTimeout(() => sendMessage(), 500);
            }
        };
        
        window.recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            showToast('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: ' + event.error);
        };
        
        window.recognition.onend = () => {
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º UI
            micBtn.classList.remove('active');
            micBtn.innerHTML = '<i class="fas fa-microphone"></i>';
        };
        
        window.recognition.start();
    }

    // –ß–∞—Ç —Å –ò–ò
    async function sendMessage() {
        const input = document.getElementById('chat-input');
        const message = input.value.trim();
        
        if (!message) {
            showToast('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ');
            return;
        }
        
        input.value = '';
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        addChatMessage('user', message);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¥—É–º–∞–µ—Ç"
        const thinkingId = 'thinking-' + Date.now();
        addChatMessage('ai', '–î—É–º–∞—é...', thinkingId);
        
        try {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π API –∏–ª–∏ fallback
            let response;
            
            if (message.toLowerCase().includes('–ø—Ä–∏–≤–µ—Ç') || message.toLowerCase().includes('–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π')) {
                response = `–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –ò–ò –ø–æ–º–æ—â–Ω–∏–∫. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?`;
            } else if (message.toLowerCase().includes('–ø–æ–≥–æ–¥–∞')) {
                response = `–Ø –ø–æ–∫–∞ –Ω–µ –º–æ–≥—É –ø–æ–ª—É—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ. –ù–æ –≤ –±—É–¥—É—â–µ–º —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ—è–≤–∏—Ç—Å—è!`;
            } else if (message.toLowerCase().includes('–≤—Ä–µ–º—è')) {
                const now = new Date();
                response = `–°–µ–π—á–∞—Å ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º text-pollinations.ai –∫–∞–∫ fallback
                const encoded = encodeURIComponent(`–û—Ç–≤–µ—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ: ${message}`);
                const apiUrl = `https://text.pollinations.ai/prompt/${encoded}`;
                
                const res = await fetch(apiUrl);
                response = await res.text();
                
                // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π, –æ–±—Ä–µ–∑–∞–µ–º –µ–≥–æ
                if (response.length > 500) {
                    response = response.substring(0, 500) + '...';
                }
            }
            
            // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¥—É–º–∞–µ—Ç"
            const thinkingElem = document.getElementById(thinkingId);
            if (thinkingElem) {
                thinkingElem.remove();
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –ò–ò
            addChatMessage('ai', response);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            saveChatHistory('user', message);
            saveChatHistory('ai', response);
            
        } catch (error) {
            console.error('Chat error:', error);
            
            // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¥—É–º–∞–µ—Ç"
            const thinkingElem = document.getElementById(thinkingId);
            if (thinkingElem) {
                thinkingElem.remove();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º fallback –æ—Ç–≤–µ—Ç
            const fallbackResponses = [
                "–Ø –ø–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å, –Ω–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–±–æ–ª—å—à–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–µ–ø–æ–ª–∞–¥–∫–∞.",
                "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –Ω–µ–º—É —á—É—Ç—å –ø–æ–∑–∂–µ.",
                "–ü–æ–∫–∞ —è –æ–±—É—á–∞—é—Å—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ç–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã. –°–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–µ!",
                "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –º–æ–≥—É –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å."
            ];
            
            const randomResponse = fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
            addChatMessage('ai', randomResponse);
            
            saveChatHistory('ai', randomResponse);
        }
    }

    function addChatMessage(sender, text, id = null) {
        const container = document.getElementById('chat-messages');
        const messageDiv = document.createElement('div');
        
        messageDiv.className = `message ${sender}-message`;
        if (id) {
            messageDiv.id = id;
        }
        
        if (sender === 'ai' && text === '–î—É–º–∞–µ—Ç...') {
            messageDiv.className += ' ai-thinking';
            messageDiv.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ${text}`;
        } else {
            messageDiv.textContent = text;
            
            // –î–µ–ª–∞–µ–º –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è
            if (sender === 'ai') {
                messageDiv.style.cursor = 'pointer';
                messageDiv.onclick = () => speakText(text);
            }
        }
        
        container.appendChild(messageDiv);
        container.scrollTop = container.scrollHeight;
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    async function generateImage() {
        const input = document.getElementById('image-prompt');
        const prompt = input.value.trim();
        
        if (!prompt) {
            showToast('–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
            return;
        }
        
        input.value = '';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        showToast('–°–æ–∑–¥–∞—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
        
        const model = document.getElementById('image-model').value;
        const style = document.getElementById('image-style').value;
        
        try {
            let imageUrl;
            
            if (model === 'unsplash') {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º Unsplash –¥–ª—è –¥–µ–º–æ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                const keywords = encodeURIComponent(prompt.split(' ').slice(0, 3).join(','));
                imageUrl = `https://source.unsplash.com/600x400/?${keywords}`;
            } else {
                // –î–µ–º–æ-—Ä–µ–∂–∏–º —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
                const demoImages = [
                    'https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    'https://images.unsplash.com/photo-1579546929662-711aa81148cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    'https://images.unsplash.com/photo-1552152974-19b9caf99137?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'
                ];
                imageUrl = demoImages[Math.floor(Math.random() * demoImages.length)];
            }
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const gallery = document.getElementById('image-gallery');
            const imageItem = document.createElement('div');
            imageItem.className = 'image-item';
            
            imageItem.innerHTML = `
                <img src="${imageUrl}" alt="${prompt}" 
                     onclick="openModal('${imageUrl}')"
                     onerror="this.src='https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                <div class="image-prompt">${prompt.substring(0, 30)}${prompt.length > 30 ? '...' : ''}</div>
                <div style="position: absolute; top: 5px; right: 5px; display: flex; gap: 5px;">
                    <button onclick="downloadImage('${imageUrl}', '${prompt.replace(/'/g, "")}')" 
                            style="background: rgba(255,255,255,0.9); border: none; border-radius: 50%; 
                                   width: 30px; height: 30px; font-size: 14px;">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ –≥–∞–ª–µ—Ä–µ–∏
            gallery.insertBefore(imageItem, gallery.firstChild);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            saveImageHistory(prompt, imageUrl, model, style);
            
            // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫
            if (navigator.vibrate) {
                navigator.vibrate(100);
            }
            
            showToast('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!');
            
        } catch (error) {
            console.error('Image generation error:', error);
            showToast('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
        }
    }

    // –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    function speakText(text) {
        if ('speechSynthesis' in window) {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ
            window.speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ru-RU';
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            
            // –ù–∞—Ö–æ–¥–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–π –≥–æ–ª–æ—Å –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
            const voices = window.speechSynthesis.getVoices();
            const russianVoice = voices.find(voice => voice.lang.startsWith('ru'));
            if (russianVoice) {
                utterance.voice = russianVoice;
            }
            
            window.speechSynthesis.speak(utterance);
            showToast('–û–∑–≤—É—á–∏–≤–∞—é...');
        } else {
            showToast('–û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
        }
    }

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    function openModal(imageUrl) {
        document.getElementById('modal-img').src = imageUrl;
        document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    async function downloadImage(url, prompt) {
        try {
            showToast('–°–∫–∞—á–∏–≤–∞—é...');
            
            const response = await fetch(url);
            const blob = await response.blob();
            const objectUrl = window.URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = objectUrl;
            link.download = (prompt ? prompt.substring(0, 20) : 'image') + '.jpg';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            window.URL.revokeObjectURL(objectUrl);
            
            // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
            
            setTimeout(() => showToast('–°–∫–∞—á–∞–Ω–æ!'), 500);
            
        } catch (error) {
            console.error('Download error:', error);
            showToast('–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è');
        }
    }

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.display = 'block';
        
        setTimeout(() => {
            toast.style.display = 'none';
        }, 3000);
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    function saveChatHistory(sender, message) {
        const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        history.push({
            sender: sender,
            message: message,
            timestamp: new Date().toISOString()
        });
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–æ–±—â–µ–Ω–∏–π
        if (history.length > 100) {
            history.splice(0, history.length - 100);
        }
        
        localStorage.setItem('chatHistory', JSON.stringify(history));
    }

    function saveImageHistory(prompt, url, model, style) {
        const history = JSON.parse(localStorage.getItem('imageHistory') || '[]');
        history.push({
            prompt: prompt,
            url: url,
            model: model,
            style: style,
            timestamp: new Date().toISOString()
        });
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        if (history.length > 50) {
            history.splice(0, history.length - 50);
        }
        
        localStorage.setItem('imageHistory', JSON.stringify(history));
    }

    function loadSavedData() {
        try {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞
            const chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
            const chatContainer = document.getElementById('chat-messages');
            
            chatHistory.slice(-20).forEach(item => {
                addChatMessage(item.sender, item.message);
            });
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            const imageHistory = JSON.parse(localStorage.getItem('imageHistory') || '[]');
            const gallery = document.getElementById('image-gallery');
            
            imageHistory.slice(-10).forEach(item => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                imageItem.innerHTML = `
                    <img src="${item.url}" alt="${item.prompt}" 
                         onclick="openModal('${item.url}')"
                         onerror="this.src='https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                    <div class="image-prompt">${item.prompt.substring(0, 30)}${item.prompt.length > 30 ? '...' : ''}</div>
                `;
                gallery.appendChild(imageItem);
            });
            
        } catch (error) {
            console.error('Error loading saved data:', error);
        }
    }

    // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    function clearChat() {
        if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?')) {
            localStorage.removeItem('chatHistory');
            document.getElementById('chat-messages').innerHTML = '';
            showToast('–ß–∞—Ç –æ—á–∏—â–µ–Ω');
        }
    }

    function clearImages() {
        if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?')) {
            localStorage.removeItem('imageHistory');
            document.getElementById('image-gallery').innerHTML = '';
            showToast('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω—ã');
        }
    }

    // –ú–µ–Ω—é
    function toggleMenu() {
        const menuItems = [
            { text: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ', icon: 'save', action: saveAllData },
            { text: '–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ', icon: 'trash', action: clearAllData },
            { text: '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è', icon: 'info-circle', action: showInstructions },
            { text: '–û –ø—Ä–æ–µ–∫—Ç–µ', icon: 'code', action: showAbout }
        ];
        
        const menuHtml = `
            <div style="position: fixed; top: 50px; right: 15px; background: #000; 
                        color: #fff; border-radius: 10px; padding: 10px 0; 
                        box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 1000; 
                        min-width: 200px; border: 1px solid rgba(212, 175, 55, 0.3);">
                ${menuItems.map(item => `
                    <div onclick="${item.action.name}()" 
                         style="padding: 12px 20px; border-bottom: 1px solid rgba(255,255,255,0.1); 
                                display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <i class="fas fa-${item.icon}" style="width: 20px;"></i>
                        ${item.text}
                    </div>
                `).join('')}
            </div>
        `;
        
        // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –º–µ–Ω—é
        const existingMenu = document.querySelector('.context-menu');
        if (existingMenu) {
            existingMenu.remove();
            return;
        }
        
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –º–µ–Ω—é
        const menu = document.createElement('div');
        menu.className = 'context-menu';
        menu.innerHTML = menuHtml;
        document.body.appendChild(menu);
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–µ–Ω—é
        setTimeout(() => {
            const closeHandler = (e) => {
                if (!e.target.closest('.context-menu') && !e.target.closest('.header-btn')) {
                    menu.remove();
                    document.removeEventListener('click', closeHandler);
                }
            };
            document.addEventListener('click', closeHandler);
        }, 100);
    }

    function saveAllData() {
        const data = {
            chatHistory: JSON.parse(localStorage.getItem('chatHistory') || '[]'),
            imageHistory: JSON.parse(localStorage.getItem('imageHistory') || '[]'),
            exportDate: new Date().toISOString()
        };
        
        const dataStr = JSON.stringify(data, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
        
        const link = document.createElement('a');
        link.href = dataUri;
        link.download = 'boss_book_data_' + new Date().toISOString().slice(0, 10) + '.json';
        link.click();
        
        showToast('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã');
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
        document.querySelector('.context-menu')?.remove();
    }

    function clearAllData() {
        if (confirm('–£–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ (—á–∞—Ç –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)?')) {
            localStorage.clear();
            document.getElementById('chat-messages').innerHTML = '';
            document.getElementById('image-gallery').innerHTML = '';
            showToast('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã');
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
            document.querySelector('.context-menu')?.remove();
        }
    }

    function showInstructions() {
        const instructions = `
            <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.9); 
                        display: flex; align-items: center; justify-content: center; 
                        z-index: 1000; padding: 20px;">
                <div style="background: #000; color: #fff; padding: 25px; border-radius: 15px; 
                            max-width: 500px; max-height: 80vh; overflow-y: auto; 
                            border: 2px solid var(--gold);">
                    <h3 style="color: var(--gold); margin-top: 0;">üìñ –ò–ù–°–¢–†–£–ö–¶–ò–Ø</h3>
                    
                    <h4>–ù–∞–≤–∏–≥–∞—Ü–∏—è:</h4>
                    <ul>
                        <li><b>–°–≤–∞–π–ø –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ</b> - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü</li>
                        <li><b>–ö–Ω–æ–ø–∫–∏-—Ç–æ—á–∫–∏ —Å–Ω–∏–∑—É</b> - –±—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥</li>
                        <li><b>–°—Ç—Ä–µ–ª–∫–∏ ‚Üê ‚Üí –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ</b> - –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞</li>
                    </ul>
                    
                    <h4>–ò–ò –ß–∞—Ç (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ 3):</h4>
                    <ul>
                        <li>–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞</li>
                        <li>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –æ—Ç–≤–µ—Ç –ò–ò –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è</li>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –ò–ò –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞</li>
                    </ul>
                    
                    <h4>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ 2):</h4>
                    <ul>
                        <li>–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –≥–æ–ª–æ—Å–æ–º</li>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è</li>
                        <li>–°–∫–∞—á–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π ‚Üì</li>
                    </ul>
                    
                    <h4>–§—É–Ω–∫—Ü–∏–∏:</h4>
                    <ul>
                        <li><b>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</b> - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
                        <li><b>–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</b> - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö</li>
                        <li><b>–û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ</b> - –∫–ª–∏–∫ –Ω–∞ —Ç–µ–∫—Å—Ç –ò–ò –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</li>
                    </ul>
                    
                    <p style="text-align: center; margin-top: 20px; color: var(--gold);">
                        –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
                    </p>
                    
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="display: block; margin: 20px auto 0; padding: 10px 20px; 
                                   background: var(--accent); color: white; border: none; 
                                   border-radius: 20px; cursor: pointer;">
                        –ü–û–ù–Ø–¢–ù–û
                    </button>
                </div>
            </div>
        `;
        
        const modal = document.createElement('div');
        modal.innerHTML = instructions;
        document.body.appendChild(modal);
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
        document.querySelector('.context-menu')?.remove();
    }

    function showAbout() {
        const about = `
            <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.9); 
                        display: flex; align-items: center; justify-content: center; 
                        z-index: 1000; padding: 20px;">
                <div style="background: #000; color: #fff; padding: 25px; border-radius: 15px; 
                            max-width: 400px; border: 2px solid var(--gold); text-align: center;">
                    <h3 style="color: var(--gold); margin-top: 0;">–ù–ê–®–ê –ö–ù–ò–ì–ê</h3>
                    <p><b>BOSS AI EDITION</b></p>
                    
                    <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ò–ò –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:</p>
                    
                    <div style="margin: 20px 0;">
                        <p>ü§ñ –£–º–Ω—ã–π —á–∞—Ç —Å –ò–ò</p>
                        <p>üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</p>
                        <p>üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</p>
                        <p>üó£Ô∏è –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</p>
                        <p>üíæ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</p>
                    </div>
                    
                    <p style="font-size: 12px; opacity: 0.7;">
                        –í–µ—Ä—Å–∏—è: 1.0<br>
                        –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å GitHub Pages<br>
                        –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
                    </p>
                    
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="display: block; margin: 20px auto 0; padding: 10px 20px; 
                                   background: var(--accent); color: white; border: none; 
                                   border-radius: 20px; cursor: pointer;">
                        –ó–ê–ö–†–´–¢–¨
                    </button>
                </div>
            </div>
        `;
        
        const modal = document.createElement('div');
        modal.innerHTML = about;
        document.body.appendChild(modal);
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
        document.querySelector('.context-menu')?.remove();
    }

    function showImageHelp() {
        showToast('–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');
    }

    function showChatHelp() {
        showToast('–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ò–ò –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥');
    }

    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –¥–ª—è –æ–±–ª–æ–∂–∫–∏
    window.addEventListener('load', () => {
        const video = document.querySelector('video');
        if (video) {
            video.play().catch(e => {
                console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ');
            });
        }
    });
</script>
</body>
</html>
